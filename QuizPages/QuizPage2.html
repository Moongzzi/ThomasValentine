<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Valentine Quiz 2</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700&family=Noto+Sans+KR:wght@400;600&display=swap"
			rel="stylesheet"
		/>
		<style>
			:root {
				--bg-top: #fff8fb;
				--bg-bottom: #f7e7ee;
				--story: #3a1d24;
				--accent: #b0283a;
				--input-border: #e5a9b7;
			}

			* {
				box-sizing: border-box;
			}

			body {
				margin: 0;
				min-height: 100vh;
				display: flex;
				align-items: center;
				justify-content: center;
				background: radial-gradient(110% 120% at 50% 0%, var(--bg-top), var(--bg-bottom));
				color: var(--story);
				padding: 60px 20px 48px;
				opacity: 0;
				transition: opacity 0.45s ease;
			}

			body.fade-in {
				opacity: 1;
			}

			.corner-logo {
				position: fixed;
				top: 0;
				left: 40px;
				width: clamp(192px, 44vw, 320px);
				height: auto;
				filter: drop-shadow(0 10px 18px rgba(58, 29, 36, 0.18));
				pointer-events: none;
				z-index: 11;
			}

			@media (min-width: 1024px) {
				.corner-logo {
					left: 56px;
				}
			}

			@media (max-width: 600px) {
				.corner-logo {
					width: clamp(120px, 38vw, 200px);
				}
			}

			.bgm-control {
				position: fixed;
				top: 18px;
				right: 18px;
				display: flex;
				flex-direction: column;
				align-items: flex-start;
				gap: 8px;
				padding: 8px 12px;
				background: rgba(255, 255, 255, 0.78);
				border: 1px solid rgba(58, 29, 36, 0.18);
				border-radius: 999px;
				box-shadow: 0 8px 18px rgba(58, 29, 36, 0.12);
				backdrop-filter: blur(6px);
				z-index: 10;
			}

			.bgm-row {
				display: flex;
				align-items: center;
				gap: 10px;
			}

			.bgm-label {
				font-family: "Noto Sans KR", "Segoe UI", sans-serif;
				font-size: 0.8rem;
				letter-spacing: 0.08em;
				color: var(--story);
			}

			#bgm-volume {
				width: 120px;
				accent-color: var(--accent);
			}

			#se-volume {
				width: 120px;
				accent-color: var(--accent);
			}

			.stage {
				width: min(90vw, 820px);
				text-align: center;
			}

			.type-line {
				font-family: "Nanum Myeongjo", "Apple SD Gothic Neo", serif;
				font-size: clamp(1.15rem, 2.4vw, 1.5rem);
				font-weight: 700;
				line-height: 1.9;
				letter-spacing: 0.03em;
				min-height: 3.6em;
			}

			.quiz-content {
				margin-top: 24px;
				opacity: 0;
				transform: translateY(8px);
				transition: opacity 0.4s ease, transform 0.4s ease;
			}

			.quiz-content.show {
				opacity: 1;
				transform: translateY(0);
			}

			.quiz-image {
				width: min(92vw, 640px);
				height: auto;
				margin-bottom: 22px;
				filter: drop-shadow(0 16px 30px rgba(58, 29, 36, 0.2));
				cursor: zoom-in;
			}

			.image-modal {
				position: fixed;
				inset: 0;
				display: flex;
				align-items: center;
				justify-content: center;
				background: rgba(18, 8, 12, 0.68);
				opacity: 0;
				pointer-events: none;
				transition: opacity 0.2s ease;
				z-index: 30;
			}

			.image-modal.show {
				opacity: 1;
				pointer-events: auto;
			}

			.image-modal img {
				width: 100vw;
				height: 100vh;
				object-fit: contain;
				box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35);
				border-radius: 0;
				cursor: zoom-out;
			}

			.answer-field {
				width: min(84vw, 360px);
				padding: 12px 16px;
				border-radius: 999px;
				border: 1px solid var(--input-border);
				font-family: "Noto Sans KR", "Segoe UI", sans-serif;
				font-size: 1rem;
				text-align: center;
				outline: none;
				background: rgba(255, 255, 255, 0.9);
			}

			.answer-field:focus {
				border-color: var(--accent);
				box-shadow: 0 0 0 3px rgba(176, 40, 58, 0.18);
			}

			.answer-field.is-wrong {
				border-color: var(--accent);
				box-shadow: 0 0 0 3px rgba(176, 40, 58, 0.18);
				animation: shake 0.38s ease-in-out;
			}

			.answer-row {
				display: flex;
				flex-wrap: wrap;
				justify-content: center;
				align-items: center;
				gap: 10px;
			}

			.help-button {
				position: relative;
				display: inline-flex;
				align-items: center;
				justify-content: center;
				width: 36px;
				height: 36px;
				border-radius: 50%;
				border: 1px solid rgba(176, 40, 58, 0.35);
				background: radial-gradient(circle at 30% 30%, #fff6f8 0%, #ffdbe4 45%, #f3a1b3 100%);
				color: #7a1d2b;
				font-family: "Noto Sans KR", "Segoe UI", sans-serif;
				font-weight: 700;
				box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8), 0 8px 14px rgba(176, 40, 58, 0.18);
				cursor: pointer;
				transition: transform 0.2s ease, box-shadow 0.2s ease;
			}

			.help-button:hover {
				transform: translateY(-1px) scale(1.02);
				box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8), 0 10px 18px rgba(176, 40, 58, 0.24);
			}

			.help-button:active {
				transform: translateY(0) scale(0.99);
			}

			.help-button::after {
				content: attr(data-tooltip);
				position: absolute;
				bottom: calc(100% + 10px);
				left: 50%;
				transform: translateX(-50%);
				background: rgba(58, 29, 36, 0.92);
				color: #fff8fb;
				padding: 8px 12px;
				border-radius: 12px;
				font-size: 0.85rem;
				white-space: nowrap;
				opacity: 0;
				pointer-events: none;
				transition: opacity 0.2s ease;
				z-index: 5;
			}

			.help-button:hover::after,
			.help-button:focus-visible::after {
				opacity: 1;
			}

			.hint-button {
				position: relative;
				display: inline-flex;
				align-items: center;
				justify-content: center;
				width: 36px;
				height: 36px;
				border-radius: 50%;
				border: 1px solid rgba(176, 40, 58, 0.3);
				background: radial-gradient(circle at 30% 30%, #fff9e8 0%, #ffe3a4 45%, #f4b658 100%);
				color: #7a4a1d;
				box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8), 0 8px 14px rgba(176, 40, 58, 0.16);
				cursor: pointer;
				transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
				opacity: 0;
				pointer-events: none;
				transform: scale(0.9);
			}

			.hint-button.show {
				opacity: 1;
				pointer-events: auto;
				transform: scale(1);
			}

			.hint-button svg {
				width: 18px;
				height: 18px;
				fill: currentColor;
			}

			.hint-button:hover {
				transform: translateY(-1px) scale(1.02);
				box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8), 0 10px 18px rgba(176, 40, 58, 0.22);
			}

			.hint-button:active {
				transform: translateY(0) scale(0.99);
			}

			.hint-button::after {
				content: attr(data-tooltip);
				position: absolute;
				bottom: calc(100% + 10px);
				left: 50%;
				transform: translateX(-50%);
				background: rgba(58, 29, 36, 0.92);
				color: #fff8fb;
				padding: 8px 12px;
				border-radius: 12px;
				font-size: 0.85rem;
				white-space: nowrap;
				opacity: 0;
				pointer-events: none;
				transition: opacity 0.2s ease;
				z-index: 5;
			}

			.hint-button:hover::after,
			.hint-button:focus-visible::after,
			.hint-button.is-open::after {
				opacity: 1;
			}

			.answer-button {
				font-family: "Noto Sans KR", "Segoe UI", sans-serif;
				font-size: 0.95rem;
				font-weight: 600;
				letter-spacing: 0.04em;
				padding: 10px 20px;
				border-radius: 999px;
				border: 1px solid var(--accent);
				background: var(--accent);
				color: #fff8fb;
				cursor: pointer;
				transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
			}

			.answer-button:hover {
				transform: translateY(-1px);
				box-shadow: 0 10px 20px rgba(176, 40, 58, 0.25);
			}

			.answer-button:active {
				transform: translateY(0);
			}

			@keyframes shake {
				0% {
					transform: translateX(0);
				}
				20% {
					transform: translateX(-6px);
				}
				40% {
					transform: translateX(6px);
				}
				60% {
					transform: translateX(-4px);
				}
				80% {
					transform: translateX(4px);
				}
				100% {
					transform: translateX(0);
				}
			}

			@media (prefers-reduced-motion: reduce) {
				.answer-field.is-wrong {
					animation: none;
				}
			}

			@media (max-width: 600px) {
				body {
					padding-top: clamp(160px, 30vw, 220px);
				}
			}
		</style>
	</head>
	<body
		data-message=">> 의자 밑에 붙어있던 누군가의 편지 <<"
		data-next-url="../StoryPages/StoryPage8.html"
		data-answer-salt="valentine-quiz-2"
		data-answer-hash="5ebd39700902bc0affe35baa4ca77d55f26be8cc4e97b462b2db2a3b878efcfb"
		data-hint-threshold="10"
	>
		<img class="corner-logo" src="../images/ValentineLogo.png" alt="Valentine logo" />
		<div class="bgm-control">
			<div class="bgm-row">
				<span class="bgm-label">BGM</span>
				<input
					id="bgm-volume"
					type="range"
					min="0"
					max="1"
					step="0.01"
					aria-label="배경음악 볼륨"
				/>
			</div>
			<div class="bgm-row">
				<span class="bgm-label">SE</span>
				<input
					id="se-volume"
					type="range"
					min="0"
					max="1"
					step="0.01"
					aria-label="효과음 볼륨"
				/>
			</div>
		</div>
		<main class="stage">
			<div class="type-line" id="typed-text" aria-live="polite"></div>
			<div class="quiz-content" id="quiz-content">
				<img class="quiz-image" src="../images/ValentineQuiz2.png" alt="Quiz 2" />
				<div class="answer-row">
					<button
						class="help-button"
						type="button"
						data-tooltip="띄어쓰기 없이 입력해주세요."
						aria-label="정답 입력 도움말"
					>
						?
					</button>
					<button
						class="hint-button"
						type="button"
						data-tooltip="편지에 이상한 부분이 있는 것 같은데..."
						aria-label="정답 힌트"
					>
						<svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
							<path
								d="M9 21h6v-1H9v1zm3-20C7.9 1 5 3.9 5 7c0 2.6 1.5 4.8 3.7 5.8V17c0 .6.4 1 1 1h4.6c.6 0 1-.4 1-1v-4.2c2.2-1 3.7-3.2 3.7-5.8 0-3.1-2.9-6-7-6zm2.6 10.9-.6.3V16h-4v-3.8l-.6-.3C7.7 11.1 6 9.2 6 7c0-2.5 2.5-5 6-5s6 2.5 6 5c0 2.2-1.7 4.1-3.4 4.9z"
							/>
						</svg>
					</button>
					<input
						class="answer-field"
						type="text"
						id="answer-field"
						placeholder="정답을 입력하세요"
						aria-label="정답 입력"
					/>
					<button class="answer-button" type="button" id="answer-button">정답 입력</button>
				</div>
			</div>
		</main>
		<div class="image-modal" id="image-modal" aria-hidden="true">
			<img id="image-modal-target" alt="Quiz 2 확대" />
		</div>
		<script src="../scripts/quiz-common.js"></script>
		<script src="../scripts/bgm.js" data-bgm-src="../music/BGM/BackgroundMusic.mp3"></script>
	</body>
</html>
